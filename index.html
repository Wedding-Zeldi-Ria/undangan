<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan - Zeldi & Ria</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;700&family=Great+Vibes&family=Noto+Naskh+Arabic:wght@400;700&display=swap" rel="stylesheet">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* Mengatur font kustom */
        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: 300; 
            /* Latar belakang utama dibuat lebih redup (Abu-abu lembut) */
            background-color: rgba(240, 240, 240, 0.95); 
            color: #333; /* Warna teks sedikit lebih gelap untuk kontras */
        }

        /* Background Gambar Mawar Global (Tipis) */
        #global-background-image {
            position: fixed;
            inset: 0;
            background-image: url('https://www.southernliving.com/thmb/Z7NN4dQCkAYuJFdIDpJ_5h3x1LE=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-1432059240-799533b303604271a3909bf975efd31b.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0.10; 
            z-index: -10; 
        }
        
        h1, h2, h3, h4, h5, h6, .font-serif {
            font-family: 'Playfair Display', serif;
        }

        .font-script {
            font-family: 'Great Vibes', cursive;
        }

        .font-arabic {
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400; 
        }

        /* Tema Warna - LEBIH REDUP */
        .theme-bg-primary { background-color: rgba(240, 240, 240, 0.95); } /* Abu-abu muda */
        .theme-bg-secondary { background-color: rgba(235, 230, 235, 0.95); } /* Ungu keabu-abuan muda */
        .theme-bg-accent { background-color: #9370DB; } 
        .theme-bg-accent-dark { background-color: #8A2BE2; } 

        .theme-text-primary { color: #4a4a4a; } 
        .theme-text-secondary { color: #666; } 
        .theme-text-accent { color: #9370DB; } 

        /* Animasi Bunga Jatuh */
        #petal-container {
            position: fixed;
            inset: 0;
            z-index: -1; 
            overflow: hidden;
            pointer-events: none; 
        }
        .petal {
            position: absolute;
            top: -50px;
            opacity: 0.7;
            animation: fall 10s linear infinite;
        }
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0.7; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0.1; }
        }

        /* Animasi Cover */
        #cover {
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        
        /* Background Khusus Akad & Resepsi - LEBIH REDUP */
        .floral-card-bg {
            background-color: #f5f5f5;
            background-image: 
                /* Overlay putih dikurangi sedikit kecerahannya */
                linear-gradient(rgba(245, 245, 245, 0.9), rgba(245, 245, 245, 0.9)), 
                url('https://vpyyxnlsfofogfqcllsd.supabase.co/storage/v1/object/public/gambar/f7b990d484ee5b0eee5fe04538b10291.jpg'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
        }

        #cover.hidden {
            opacity: 0;
            transform: translateY(-100%);
            pointer-events: none;
        }

        .cover-blur-overlay {
            position: absolute;
            inset: 0;
            background-color: transparent; 
            display: grid;
            place-items: center;
            overflow-y: auto; 
            text-align: center;
        }

        /* Tombol Musik Putar */
        #music-toggle {
            animation: spin 4s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .accent-border {
            border: 2px solid #C4B5FD; 
            padding: 1.5rem;
            position: relative;
        }

        /* Ornamen Sudut */
        .filigree-ornament {
            position: absolute;
            width: 60px; 
            height: 60px;
            background-repeat: no-repeat;
            background-size: contain;
            opacity: 0.7;
            z-index: 20;
        }

        .filigree-ornament.top-left {
            top: 0.5rem; left: 0.5rem; transform: rotate(0deg);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23FFF0F5"/><stop offset="50%" style="stop-color:%23DB7093"/><stop offset="100%" style="stop-color:%239370DB"/></linearGradient></defs><path fill="url(%23petalGradient)" opacity="0.8" d="M50,0 C80,10 90,40 100,50 C90,60 80,90 50,100 C20,90 10,60 0,50 C10,40 20,10 50,0 Z M50,30 C60,40 60,60 50,70 C40,60 40,40 50,30 Z"/></svg>');
        }
        .filigree-ornament.top-right {
            top: 0.5rem; right: 0.5rem; transform: rotateY(180deg);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23FFF0F5"/><stop offset="50%" style="stop-color:%23DB7093"/><stop offset="100%" style="stop-color:%239370DB"/></linearGradient></defs><path fill="url(%23petalGradient)" opacity="0.8" d="M50,0 C80,10 90,40 100,50 C90,60 80,90 50,100 C20,90 10,60 0,50 C10,40 20,10 50,0 Z M50,30 C60,40 60,60 50,70 C40,60 40,40 50,30 Z"/></svg>');
        }
        .filigree-ornament.bottom-left {
            bottom: 0.5rem; left: 0.5rem; transform: rotateX(180deg);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23FFF0F5"/><stop offset="50%" style="stop-color:%23DB7093"/><stop offset="100%" style="stop-color:%239370DB"/></linearGradient></defs><path fill="url(%23petalGradient)" opacity="0.8" d="M50,0 C80,10 90,40 100,50 C90,60 80,90 50,100 C20,90 10,60 0,50 C10,40 20,10 50,0 Z M50,30 C60,40 60,60 50,70 C40,60 40,40 50,30 Z"/></svg>');
        }
        .filigree-ornament.bottom-right {
            bottom: 0.5rem; right: 0.5rem; transform: rotate(180deg);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23FFF0F5"/><stop offset="50%" style="stop-color:%23DB7093"/><stop offset="100%" style="stop-color:%239370DB"/></linearGradient></defs><path fill="url(%23petalGradient)" opacity="0.8" d="M50,0 C80,10 90,40 100,50 C90,60 80,90 50,100 C20,90 10,60 0,50 C10,40 20,10 50,0 Z M50,30 C60,40 60,60 50,70 C40,60 40,40 50,30 Z"/></svg>');
        }

        @media (min-width: 768px) {
            .filigree-ornament { width: 100px; height: 100px; }
            .filigree-ornament.top-left { top: -20px; left: -20px; }
            .filigree-ornament.top-right { top: -20px; right: -20px; }
            .filigree-ornament.bottom-left { bottom: -20px; left: -20px; }
            .filigree-ornament.bottom-right { bottom: -20px; right: -20px; }
        }

        .floral-divider {
            height: 2px; width: 150px;
            background-color: #C4B5FD;
            margin: 2rem auto;
        }
    </style>
</head>
<body class="theme-bg-primary theme-text-primary overflow-x-hidden">

    <!-- Background Global -->
    <div id="global-background-image"></div>
    <div id="petal-container"></div>

    <!-- 1. Cover / Layar Pembuka -->
    <div id="cover" class="fixed inset-0 z-50">
        <!-- Background Halaman Sampul (ok.jpg) -->
        <div class="absolute inset-0 z-0" 
             style="
                /* Overlay dikurangi kecerahannya agar tidak terlalu 'silau' */
                background-image: linear-gradient(rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.3)), url('https://vpyyxnlsfofogfqcllsd.supabase.co/storage/v1/object/public/gambar/ok.jpg');
                background-size: cover;
                background-position: center;
             ">
        </div>
        
        <div class="cover-blur-overlay">
            <div class="relative z-10 theme-text-primary p-4 md:p-8 w-full md:max-w-5xl md:mx-auto md:border-2 md:border-purple-300/50 md:rounded-lg">
                
                <div class="filigree-ornament top-left"></div>
                <div class="filigree-ornament top-right"></div>
                <div class="filigree-ornament bottom-left"></div>
                <div class="filigree-ornament bottom-right"></div>

                <p class="font-serif text-xl sm:text-2xl md:text-3xl" data-aos="fade-up" data-aos-delay="0">Undangan Pernikahan</p>
                
                <h1 class="font-serif text-5xl sm:text-7xl md:text-9xl my-4 theme-text-accent" data-aos="fade-up" data-aos-delay="50">ZR</h1>
                <p class="font-serif text-xl sm:text-2xl md:text-3xl" data-aos="fade-up" data-aos-delay="100">21 Desember 2025</p>
                
                <div class="mt-12" data-aos="fade-up" data-aos-delay="150">
                    <p class="text-base sm:text-lg">Kepada Yth.</p>
                    <p id="guest-name" class="text-xl sm:text-2xl font-bold my-2">Tamu Undangan</p>
                    <p class="text-sm">(Mohon maaf tidak dapat menyebutkan satu per satu)</p>
                </div>

                <button id="open-invitation" class="mt-8 theme-bg-accent-dark text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105 flex items-center justify-center mx-auto" data-aos="fade-up" data-aos-delay="150">
                    <i data-lucide="mail-open" class="w-5 h-5 mr-2"></i>
                    Buka Undangan
                </button>
            </div>
        </div>
    </div>

    <!-- 2. Konten Utama -->
    <main id="main-content" class="opacity-0 transition-opacity duration-1000 pb-20 md:pb-0 relative z-10">
        
        <audio id="bg-music" loop>
            <source src="https://taeodevmwvalajqjbpaq.supabase.co/storage/v1/object/public/music/KAHITNA_-_Menikahimu_(mp3.pm).mp3" type="audio/mpeg">
        </audio>

        <!-- 3. Header / Hero Section -->
        <header id="home" class="min-h-screen min-h-[600px] flex flex-col items-center justify-center text-center p-4 md:p-8 relative overflow-hidden">
            
            <!-- Overlay putih dikurangi dari 40% menjadi 30% -->
            <div class="absolute inset-0 bg-white/30 z-10"></div> 
            
            <div class="relative z-10 theme-text-primary pt-16 md:pt-20">
                <p class="text-xl sm:text-2xl md:text-3xl font-serif" data-aos="fade-up">The Wedding Of</p>
                <h1 class="text-5xl sm:text-7xl md:text-8xl font-serif my-4 theme-text-accent" data-aos="fade-up" data-aos-delay="200">Zeldi & Ria</h1>
                <p class="text-xl sm:text-2xl md:text-3xl font-serif" data-aos="fade-up" data-aos-delay="400">21 . 12 . 2025</p>

                <button id="music-toggle" class="mt-12 md:mt-16 w-14 h-14 rounded-full theme-bg-accent-dark text-white flex items-center justify-center shadow-lg mx-auto transition-transform duration-300 hover:scale-105" data-aos="fade-up" data-aos-delay="600">
                    <span id="music-icon-wrapper">
                        <i data-lucide="music-2"></i>
                    </span>
                </button>
            </div>
        </header>

        <!-- 4. Mempelai -->
        <section id="mempelai" class="py-24 px-6 max-w-5xl mx-auto relative">
            <div class="text-center relative z-10" data-aos="fade-up">
                <p class="text-lg theme-text-secondary">Assalamu'alaikum Warahmatullahi Wabarakatuh</p>
                
                <div class="my-8" data-aos="fade-up" data-aos-delay="100">
                    <p class="font-arabic text-2xl md:text-3xl theme-text-primary leading-relaxed" dir="rtl">
                        وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَاجًا لِّتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُم مَّوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِّقَوْمٍ يَتَفَكَّرُونَ
                    </p>
                    <p class="mt-4 text-sm italic max-w-2xl mx-auto">
                        "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang. Sungguh, pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir."
                    </p>
                    <p class="mt-2 text-base font-semibold">(QS. Ar-Rum: 21)</p>
                </div>
                
                <div class="floral-divider"></div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mt-20 text-center relative z-10">
                    
                    <!-- Pria -->
                    <div data-aos="fade-right" data-aos-delay="200" class="accent-border p-8 rounded-lg shadow-lg bg-gray-50/80">
                        <div class="w-40 h-40 mx-auto rounded-full overflow-hidden border-4 border-purple-300 mb-6 shadow-md">
                            <img src="https://placehold.co/400x400/e8e0d5/a89078?text=Zeldi" alt="Foto Mempelai Pria" class="w-full h-full object-cover">
                        </div>
                        <h3 class="text-3xl font-serif mb-2 theme-text-accent">Zeldi</h3>
                        <p class="text-lg font-semibold mb-4">Zeldi Prasetyo, S.Kom.</p>
                        <p class="theme-text-secondary text-sm mb-2">Putra dari</p>
                        <p class="font-medium">Bpk. Santoso & Ibu Sri Wahyuni</p>
                    </div>
                    
                    <div class="flex items-center justify-center text-7xl font-serif theme-text-accent md:hidden" data-aos="fade-up">&</div>
                    
                    <!-- Wanita -->
                    <div data-aos="fade-left" data-aos-delay="400" class="accent-border p-8 rounded-lg shadow-lg bg-gray-50/80">
                        <div class="w-40 h-40 mx-auto rounded-full overflow-hidden border-4 border-purple-300 mb-6 shadow-md">
                            <img src="https://placehold.co/400x400/e8e0d5/a89078?text=Ria" alt="Foto Mempelai Wanita" class="w-full h-full object-cover">
                        </div>
                        <h3 class="text-3xl font-serif mb-2 theme-text-accent">Ria</h3>
                        <p class="text-lg font-semibold mb-4">Ria Anjelina, S.Ak.</p>
                        <p class="theme-text-secondary text-sm mb-2">Putri dari</p>
                        <p class="font-medium">Bpk. Budi Hartono & Ibu Siti Aminah</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Detail Acara (Akad & Resepsi) -->
        <section id="acara" class="py-24 px-6 theme-bg-secondary text-center relative">
            <div class="max-w-5xl mx-auto relative z-10">
                <h2 class="text-3xl sm:text-4xl font-serif mb-12 theme-text-accent" data-aos="fade-up">Rangkaian Acara</h2>
                
                <div id="countdown" class="flex justify-center space-x-4 md:space-x-8 text-center my-16" data-aos="fade-up" data-aos-delay="200">
                    <div class="bg-gray-50/80 p-4 rounded-lg shadow-md w-20 md:w-28 accent-border">
                        <span id="days" class="text-3xl md:text-4xl font-bold theme-text-accent">00</span>
                        <span class="block text-sm md:text-base">Hari</span>
                    </div>
                    <div class="bg-gray-50/80 p-4 rounded-lg shadow-md w-20 md:w-28 accent-border">
                        <span id="hours" class="text-3xl md:text-4xl font-bold theme-text-accent">00</span>
                        <span class="block text-sm md:text-base">Jam</span>
                    </div>
                    <div class="bg-gray-50/80 p-4 rounded-lg shadow-md w-20 md:w-28 accent-border">
                        <span id="minutes" class="text-3xl md:text-4xl font-bold theme-text-accent">00</span>
                        <span class="block text-sm md:text-base">Menit</span>
                    </div>
                    <div class="bg-gray-50/80 p-4 rounded-lg shadow-md w-20 md:w-28 accent-border">
                        <span id="seconds" class="text-3xl md:text-4xl font-bold theme-text-accent">00</span>
                        <span class="block text-sm md:text-base">Detik</span>
                    </div>
                </div>
                
                <!-- Detail Acara dengan Background Baru -->
                <!-- DIUBAH: bg-white/90 menjadi bg-gray-50/90 agar tidak terlalu putih silau -->
                <div class="bg-gray-50/90 p-8 md:p-12 rounded-lg shadow-lg accent-border floral-card-bg" 
                     data-aos="fade-up" data-aos-delay="400">
                    
                    <h3 class="text-3xl font-serif theme-text-accent">Akad Nikah</h3>
                    <p class="text-xl font-semibold mt-6">Minggu, 21 Desember 2025</p>
                    <p class="text-lg mt-2">Pukul 08:00 WIB - Selesai</p>
                    
                    <hr class="my-6 border-t border-purple-300/30 w-1/3 mx-auto">
                    
                    <p class="text-lg font-semibold">Lokasi:</p>
                    <p class="text-base mt-2 max-w-md mx-auto">
                        Masjid Jami Al muttaqin komplek Hankam Cibubur, 
                        Kelapa dua wetan, Ciracas, Jakarta Timur.
                    </p>

                    <hr class="my-10 border-t-2 border-purple-300/50 w-1/2 mx-auto">

                    <h3 class="text-3xl font-serif theme-text-accent">Resepsi Nikah</h3>
                    <p class="text-xl font-semibold mt-6">Minggu, 21 Desember 2025</p>
                    <p class="text-lg mt-2">Pukul 10:00 WIB - Selesai</p>
                    
                    <hr class="my-6 border-t border-purple-300/30 w-1/3 mx-auto">
                    
                    <p class="text-lg font-semibold">Lokasi:</p>
                    <p class="text-base mt-2 max-w-md mx-auto">
                        Citra Grand Cibubur Cluster Mansion Garden Blok K5/6, 
                        Jatikarya, Jatisampurna, Bekasi, Jawa Barat.
                    </p>
                </div>
            </div>
        </section>

        <!-- 6. Lokasi Maps (2 Kolom) -->
        <section id="lokasi" class="py-24 px-6 text-center">
            
            <h2 class="text-3xl sm:text-4xl font-serif mb-12 theme-text-accent" data-aos="fade-up">Lokasi Pernikahan</h2>
            <div class="floral-divider"></div>
            
            <div class="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">

                <!-- Kiri: LOKASI AKAD -->
                <div class="flex flex-col h-full" data-aos="fade-right" data-aos-delay="200">
                    <h3 class="text-2xl font-serif theme-text-accent mb-4">Lokasi Akad</h3>
                    <p class="text-sm mb-4 theme-text-secondary">Masjid Jami Al Muttaqin, Cibubur</p>
                    
                    <div class="rounded-lg overflow-hidden shadow-lg accent-border flex-grow">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.341499591419!2d106.8888065759111!3d-6.348821462106053!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69ecf7481f3377%3A0xb3f5aa4a480b6e31!2sMasjid%20Jami%2BAl-Muttaqin!5e0!3m2!1sen!2sid!4v1730305555000!5m2!1sen!2sid" 
                            width="100%" 
                            height="350" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>

                    <a href="https://goo.gl/maps/MasjidJamiAlMuttaqin" target="_blank" rel="noopener noreferrer" 
                       class="inline-flex items-center justify-center mt-6 theme-bg-accent-dark text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105">
                        <i data-lucide="map-pin" class="w-5 h-5 mr-2"></i>
                        Google Maps Akad
                    </a>
                </div>

                <!-- Kanan: LOKASI RESEPSI -->
                <div class="flex flex-col h-full" data-aos="fade-left" data-aos-delay="400">
                    <h3 class="text-2xl font-serif theme-text-accent mb-4">Lokasi Resepsi</h3>
                    <p class="text-sm mb-4 theme-text-secondary">Citra Grand Cibubur, Cluster Mansion Garden</p>
                    
                    <div class="rounded-lg overflow-hidden shadow-lg accent-border flex-grow">
                        <iframe 
                            src="https://maps.google.com/maps?q=Citra+Grand+Cibubur+Cluster+Mansion+Garden+Blok+K5/6&t=&z=15&ie=UTF8&iwloc=&output=embed" 
                            width="100%" 
                            height="350" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>

                    <a href="https://maps.app.goo.gl/WpFa99LJciEFybRK9?g_st=aw" target="_blank" rel="noopener noreferrer" 
                       class="inline-flex items-center justify-center mt-6 theme-bg-accent-dark text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105">
                        <i data-lucide="map-pin" class="w-5 h-5 mr-2"></i>
                        Google Maps Resepsi
                    </a>
                </div>

            </div>
        </section>

        <!-- 8. Konfirmasi Kehadiran (RSVP) -->
        <section id="rsvp-section" class="py-24 px-6">
            <div class="max-w-5xl mx-auto">
                <h2 class="text-3xl sm:text-4xl font-serif text-center mb-12 theme-text-accent" data-aos="fade-up">Konfirmasi Kehadiran</h2>
                <div class="floral-divider"></div>

                <!-- DIUBAH: bg-white/80 -> bg-gray-50/80 agar tidak terlalu silau -->
                <form id="guestbook-form" class="bg-gray-50/80 p-8 rounded-lg shadow-md accent-border" data-aos="fade-up" data-aos-delay="200">
                    <div class="mb-4">
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nama</label>
                        <input type="text" id="name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-300" required placeholder="Nama Anda">
                    </div>
                    <div class="mb-4">
                        <label for="attendance" class="block text-sm font-medium text-gray-700 mb-1">Konfirmasi Kehadiran</label>
                        <select id="attendance" name="attendance" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-300">
                            <option value="Hadir">Hadir</option>
                            <option value="Mungkin Hadir">Mungkin Hadir</option>
                            <option value="Tidak Hadir">Tidak Hadir</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Ucapan & Doa</label>
                        <textarea id="message" name="message" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-300" required placeholder="Tulis ucapan Anda di sini..."></textarea>
                    </div>
                    
                    <button type="submit" id="submit-rsvp" class="w-full theme-bg-accent-dark text-white font-bold py-3 rounded-md hover:bg-purple-700 transition-colors shadow-lg">Kirim Konfirmasi</button>
                    <p id="rsvp-success" class="text-center mt-4 text-sm hidden text-green-600 font-semibold">Terima kasih! Konfirmasi Anda telah terkirim.</p>
                    <p id="rsvp-error" class="text-center mt-4 text-sm hidden text-red-600 font-semibold">Gagal mengirim. Silakan coba lagi.</p>
                </form>
            </div>
        </section>

        <!-- 9. Buku Tamu (Daftar Ucapan) -->
        <!-- DIUBAH: bg-white/30 -> bg-gray-100/30 -->
        <section id="ucapan" class="py-12 px-6 bg-gray-100/30">
            <div class="max-w-5xl mx-auto">
                <h3 class="text-2xl font-serif mb-6 text-center theme-text-accent">Ucapan & Doa</h3>
                <div class="floral-divider"></div>
                
                <!-- DIUBAH: bg-white/50 -> bg-gray-50/80 -->
                <div id="guestbook-messages" class="space-y-6 max-h-96 overflow-y-auto bg-gray-50/80 p-6 rounded-lg shadow-md accent-border">
                    <p id="loading-entries" class="text-center text-gray-500">Memuat ucapan...</p>
                </div>
            </div>
        </section>

        <!-- 10. Footer -->
        <footer class="py-12 text-center theme-bg-secondary relative">
            <div class="relative z-10 max-w-5xl mx-auto">
                <p class="text-lg font-serif" data-aos="fade-up">Merupakan suatu kehormatan dan kebahagiaan bagi kami,
                    apabila Bapak/Ibu/Saudara/i berkenan hadir
                    untuk memberikan doa restu kepada kami.</p>
                <p class="mt-8 font-serif text-3xl theme-text-accent" data-aos="fade-up" data-aos-delay="200">Zeldi & Ria</p>
                <p class="mt-4 text-sm text-gray-500" data-aos="fade-up" data-aos-delay="400">Kami yang berbahagia,<br>Keluarga Besar Kedua Mempelai</p>
                
                <div class="mt-12 text-xs text-gray-400">
                    <p>&copy; 2025 Zeldi & Ria Wedding. Created with ❤️</p>
                </div>
            </div>
        </footer>

    </main>

    <!-- Library JavaScript -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- SUPABASE INTEGRATION (MODE PENUH) -->
    <script>
        // --- KONFIGURASI SUPABASE ---
        const supabaseUrl = 'https://vpyyxnlsfofogfqcllsd.supabase.co';
        
        // PENTING: GANTI TEKS DI BAWAH INI DENGAN 'ANON KEY' DARI DASHBOARD SUPABASE ANDA
        // JIKA TIDAK DIGANTI, FITUR PENYIMPANAN TIDAK AKAN BERFUNGSI
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZweXl4bmxzZm9mb2dmcWNsbHNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExOTgwNTAsImV4cCI6MjA3Njc3NDA1MH0.7AJzoI4yhLYxOgPQzyq_NkUV_FhT833sKU59sHuGzZQ'; 
        
        // Inisialisasi Client
        // Gunakan 'supabaseClient' untuk menghindari konflik dengan library global
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);

        // --- Elemen DOM ---
        const rsvpForm = document.getElementById('guestbook-form');
        const submitButton = document.getElementById('submit-rsvp');
        const rsvpSuccessMessage = document.getElementById('rsvp-success');
        const rsvpErrorMessage = document.getElementById('rsvp-error');
        const guestBookEntries = document.getElementById('guestbook-messages');
        const loadingEntries = document.getElementById('loading-entries');

        // 1. Kirim RSVP ke Supabase (TANPA FALLBACK LOKAL)
        if(rsvpForm) {
            rsvpForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('name').value;
                const status = document.getElementById('attendance').value;
                const message = document.getElementById('message').value;

                submitButton.disabled = true;
                submitButton.innerText = "Mengirim...";
                rsvpErrorMessage.classList.add('hidden');
                rsvpSuccessMessage.classList.add('hidden');

                try {
                    // Insert ke tabel 'guestbook'
                    // Menggunakan kolom 'status' sesuai perbaikan sebelumnya
                    const { error } = await supabaseClient
                        .from('guestbook')
                        .insert([
                            { name: name, status: status, message: message }
                        ]);

                    if (error) throw error;

                    rsvpSuccessMessage.classList.remove('hidden');
                    rsvpForm.reset();

                } catch (error) {
                    console.error("Error sending RSVP: ", error);
                    // Tampilkan pesan error umum yang sopan jika gagal (misal karena Key belum diisi)
                    let msg = "Gagal mengirim pesan. Silakan coba lagi.";
                    
                    // Cek jika error karena API Key salah/kosong
                    if (error.message && (error.message.includes("API key") || error.code === "401")) {
                        msg = "Koneksi database belum dikonfigurasi.";
                    }
                    
                    rsvpErrorMessage.innerText = msg;
                    rsvpErrorMessage.classList.remove('hidden');
                } finally {
                    submitButton.disabled = false;
                    submitButton.innerText = "Kirim Konfirmasi";
                    setTimeout(() => {
                         rsvpSuccessMessage.classList.add('hidden');
                    }, 5000);
                }
            });
        }

        // 2. Muat Buku Tamu & Realtime (TANPA FALLBACK LOKAL)
        async function loadGuestBook() {
            if(!loadingEntries) return;

            // Fungsi untuk render list
            const renderEntries = (entries) => {
                if (!entries || entries.length === 0) {
                    loadingEntries.innerText = "Jadilah yang pertama memberi ucapan!";
                    loadingEntries.classList.remove('hidden');
                    guestBookEntries.innerHTML = '';
                    guestBookEntries.appendChild(loadingEntries);
                } else {
                    loadingEntries.classList.add('hidden');
                    guestBookEntries.innerHTML = ''; // Clear loading msg
                    
                    entries.forEach(entry => {
                        if (entry.message) {
                            const entryElement = document.createElement('div');
                            entryElement.className = 'border-b border-gray-200 pb-3 fade-in';
                            // Membaca 'status' dari hasil query
                            const attendanceStatus = entry.status || entry.attendance || "Hadir"; 
                            
                            entryElement.innerHTML = `
                                <div class="flex justify-between items-center">
                                    <p class="font-semibold text-emerald-800">${entry.name}</p>
                                    <span class="text-xs ${
                                        attendanceStatus === 'Hadir' ? 'bg-green-100 text-green-700' : 
                                        attendanceStatus === 'Tidak Hadir' ? 'bg-red-100 text-red-700' : 
                                        'bg-yellow-100 text-yellow-700'
                                    } font-medium px-2 py-0.5 rounded-full">${attendanceStatus}</span>
                                </div>
                                <p class="text-gray-600 mt-1 italic">"${entry.message}"</p>
                            `;
                            guestBookEntries.appendChild(entryElement);
                        }
                    });
                }
            };

            // Fetch dari Supabase
            const { data, error } = await supabaseClient
                .from('guestbook')
                .select('*')
                .order('created_at', { ascending: false });

            if (error) {
                console.error("Error loading guestbook:", error);
                // Pesan error halus di area loading
                if (error.message && (error.message.includes("API key") || error.code === "401")) {
                    loadingEntries.innerText = "Menunggu konfigurasi server...";
                } else {
                    loadingEntries.innerText = "Gagal memuat data.";
                }
            } else {
                renderEntries(data);
            }

            // Realtime Subscription
            supabaseClient
                .channel('guestbook_channel')
                .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'guestbook' }, payload => {
                    // Saat ada data baru, fetch ulang agar urutan benar (atau prepend manual)
                    const entry = payload.new;
                    if (entry.message) {
                        const entryElement = document.createElement('div');
                        entryElement.className = 'border-b border-gray-200 pb-3 fade-in';
                         // FIX: Membaca 'status' juga di realtime
                        const attendanceStatus = entry.status || entry.attendance || "Hadir";

                        entryElement.innerHTML = `
                            <div class="flex justify-between items-center">
                                <p class="font-semibold text-emerald-800">${entry.name}</p>
                                <span class="text-xs ${
                                    attendanceStatus === 'Hadir' ? 'bg-green-100 text-green-700' : 
                                    attendanceStatus === 'Tidak Hadir' ? 'bg-red-100 text-red-700' : 
                                    'bg-yellow-100 text-yellow-700'
                                } font-medium px-2 py-0.5 rounded-full">${attendanceStatus}</span>
                            </div>
                            <p class="text-gray-600 mt-1 italic">"${entry.message}"</p>
                        `;
                        
                        // Hapus loading/empty message jika ada
                        if(loadingEntries && !loadingEntries.classList.contains('hidden')) {
                            guestBookEntries.innerHTML = '';
                        }
                        guestBookEntries.prepend(entryElement);
                    }
                })
                .subscribe();
        }

        // Jalankan Load Data
        loadGuestBook();
    </script>
    
    <!-- SCRIPT UI/ANIMASI UTAMA -->
    <script>
        // --- SKRIP UI (ANIMASI & LOGIKA UI) ---
        document.addEventListener('DOMContentLoaded', () => {
            AOS.init({
                duration: 800, 
                once: true, 
            });
            lucide.createIcons(); 
            createPetals(); 
            setupCountdown(); 

            // Auto Scroll Listeners
            window.addEventListener('wheel', stopAutoScroll, { passive: true });
            window.addEventListener('touchmove', stopAutoScroll, { passive: true });
            window.addEventListener('keydown', stopAutoScroll, { passive: true });
            window.addEventListener('mousedown', stopAutoScroll, { passive: true });
        });

        // UI References
        const openButton = document.getElementById('open-invitation');
        const cover = document.getElementById('cover');
        const mainContent = document.getElementById('main-content');
        const bgMusic = document.getElementById('bg-music');
        const musicToggle = document.getElementById('music-toggle');
        
        let isPlaying = false;
        let isAutoScrolling = false;
        let autoScrollFrame;

        // Auto Scroll Function
        function startAutoScroll() {
            isAutoScrolling = true;
            function scrollLoop() {
                if (!isAutoScrolling) return;
                if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) {
                    isAutoScrolling = false;
                    return;
                }
                window.scrollBy(0, 0.8); 
                autoScrollFrame = requestAnimationFrame(scrollLoop);
            }
            setTimeout(() => {
                if(isAutoScrolling) scrollLoop();
            }, 1500);
        }

        function stopAutoScroll() {
            if (isAutoScrolling) {
                isAutoScrolling = false;
                cancelAnimationFrame(autoScrollFrame);
            }
        }

        // Buka Undangan
        openButton.addEventListener('click', () => { 
            cover.classList.add('hidden');
            mainContent.style.opacity = '1';
            document.body.style.overflow = 'auto'; 
            
            bgMusic.play().then(() => {
                isPlaying = true;
            }).catch(e => {
                console.warn("Autoplay musik dicegah.", e);
                isPlaying = false;
                musicToggle.style.animation = 'none';
            });

            startAutoScroll();
        });

        // Toggle Music
        musicToggle.addEventListener('click', () => {
            if (isPlaying) {
                bgMusic.pause();
                musicToggle.style.animation = 'none';
                isPlaying = false;
            } else {
                bgMusic.play();
                musicToggle.style.animation = 'spin 4s linear infinite';
                isPlaying = true;
            }
        });

        // Countdown
        function setupCountdown() {
            const weddingDate = new Date("December 21, 2025 08:00:00").getTime();
            const timer = setInterval(function() {
                const now = new Date().getTime();
                const distance = weddingDate - now;
                if (distance < 0) {
                    clearInterval(timer);
                    const el = document.getElementById("countdown");
                    if(el) el.innerHTML = "<p class='text-2xl font-bold theme-text-accent'>Acara Telah Dimulai!</p>";
                    return;
                }
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                const dEl = document.getElementById("days");
                if(dEl) dEl.innerText = days < 10 ? "0" + days : days;
                const hEl = document.getElementById("hours");
                if(hEl) hEl.innerText = hours < 10 ? "0" + hours : hours;
                const mEl = document.getElementById("minutes");
                if(mEl) mEl.innerText = minutes < 10 ? "0" + minutes : minutes;
                const sEl = document.getElementById("seconds");
                if(sEl) sEl.innerText = seconds < 10 ? "0" + seconds : seconds;
            }, 1000);
        }

        // Petals
        function createPetals() {
            const container = document.getElementById('petal-container');
            const petalCount = 15; 
            for (let i = 0; i < petalCount; i++) {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                const size = Math.random() * 15 + 10 + 'px';
                petal.style.width = size;
                petal.style.height = size;
                petal.style.left = Math.random() * 100 + 'vw';
                petal.style.animationDuration = (Math.random() * 5 + 5) + 's';
                petal.style.animationDelay = Math.random() * 5 + 's';
                petal.style.backgroundColor = '#FFB7C5';
                petal.style.borderRadius = '100% 0% 100% 0%';
                container.appendChild(petal);
            }
        }

        // URL Param
        const urlParams = new URLSearchParams(window.location.search);
        const guestName = urlParams.get('to');
        if (guestName) {
            const gnEl = document.getElementById('guest-name');
            if(gnEl) gnEl.innerText = guestName;
        }
    </script>
</body>
</html>
