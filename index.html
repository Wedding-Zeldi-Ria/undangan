<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan - Zeldi&Ria</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.8"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- PERUBAHAN: Font diganti total -->
    <link href="https://fonts.googleapis.com/css2?family=Alex+Brush&family=Cormorant+Garamond:wght@400;700&family=Lato:wght@300;400;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap" rel="stylesheet">
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@0.21.0"></script>
    
    <style>
        /* --- PERUBAHAN TOTAL TEMA WARNA --- */
        /* Tema diubah menjadi Putih, Baby Pink, dan Ungu */
        :root {
            --bg-primary: #FFFFFF; /* Putih */
            --bg-secondary: #FCE7F3; /* Baby Pink (Tailwind Pink-100) */
            --bg-accent: #9333EA; /* Ungu (Tailwind Purple-600) */
            --bg-accent-dark: #7E22CE; /* Ungu Tua (Tailwind Purple-700) */
            --text-primary: #3A3A3A; /* Abu-abu tua (Dark Gray) */
            --text-secondary: #5C5C5C; /* Abu-abu medium */
            --text-accent: #9333EA; /* Ungu (Menggantikan Emas) */
            --border-color: #F3E8FF; /* Border Ungu Sangat Muda */
        }
        /* --- Akhir Perubahan Tema --- */


        /* Mengatur font kustom */
        body {
            /* PERUBAHAN: Font utama */
            font-family: 'Lato', sans-serif;
            font-weight: 300; 
            /* PERUBAHAN: Latar belakang utama */
            background-color: var(--bg-primary);
            /* PERUBAHAN: Tekstur kertas dihapus untuk 'basic white' */
            /* background-image: url('https://www.transparenttextures.com/patterns/subtle-paper.png'); */
            color: var(--text-primary); 
        }

        /* --- DIHAPUS: Background Gambar Mawar Global --- */

        /* PERUBAHAN: Font heading */
        h1, h2, h3, h4, h5, h6, .font-serif {
            font-family: 'Cormorant Garamond', serif;
        }

        /* PERUBAHAN: Font script */
        .font-script {
            font-family: 'Alex Brush', cursive;
        }

        /* Font untuk Bahasa Arab (Tetap) */
        .font-arabic {
            font-family: 'Noto Naskh Arabic', serif;
            font-weight: 400;
        }

        /* Kelas untuk tema warna baru */
        .theme-bg-primary { background-color: var(--bg-primary); }
        .theme-bg-secondary { background-color: var(--bg-secondary); }
        .theme-bg-accent { background-color: var(--bg-accent); } /* Hijau */
        .theme-bg-accent-dark { background-color: var(--bg-accent-dark); } /* Hijau Tua */

        .theme-text-primary { color: var(--text-primary); }
        .theme-text-secondary { color: var(--text-secondary); }
        .theme-text-accent { color: var(--text-accent); } /* Emas */


        /* Animasi Panah Scroll Down (Tetap) */
        @keyframes bounce-slow {
            0%, 100% {
                transform: translateY(-15%);
                animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
            }
            50% {
                transform: translateY(0);
                animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
            }
        }
        .animate-bounce-slow {
            animation: bounce-slow 2s infinite;
        }

        /* Animasi fade-in sederhana (Tetap) */
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Animasi untuk cover overlay (Tetap) */
        #cover {
            transition: opacity 0.5s ease-out;
            background-color: var(--bg-primary); /* DIUBAH: Dulu transparent, sekarang solid putih */
        }
        #cover.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .cover-blur-overlay {
            position: absolute;
            inset: 0;
            background-color: transparent; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            overflow-y: auto; 
            padding: 1rem;
        }

        /* Styling untuk tombol musik (Tetap) */
        #music-toggle.playing #music-icon-wrapper {
            animation: spin 4s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* PERUBAHAN: .accent-border diganti menjadi .card-style */
        .accent-border {
            /* Mengganti border dengan card-style */
            background-color: #ffffff; /* Kartu putih bersih */
            border-radius: 12px;
            /* Shadow yang lebih modern */
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05), 0 4px 6px -4px rgba(0,0,0,0.05);
            padding: 2rem; /* Padding standar baru */
            position: relative;
            border: 1px solid var(--border-color); /* Border tipis */
        }
        /* Penyesuaian padding untuk mobile (dulu di-handle di HTML) */
        @media (max-width: 640px) {
            .accent-border {
                padding: 1.5rem;
            }
        }
        /* --- Akhir Perubahan Card --- */


        /* Ornamen pemisah */
        .floral-divider {
            height: 2px;
            width: 150px;
            /* PERUBAHAN: Warna Emas */
            background-color: var(--text-accent);
            margin: 2rem auto;
            position: relative;
        }
        
        /* Ornamen samping (Tetap disembunyikan) */
        .floral-bg-left, .floral-bg-right {
            display: none;
        }

        /* Pola Ornamen Hero Section (Tetap dihapus) */
        .hero-ornament-pattern {
            /* Pola telah dihapus */
        }
    </style>
</head>
<body class="theme-bg-primary theme-text-primary overflow-x-hidden">

    <!-- DIHAPUS: Background Gambar Mawar Global -->

    <!-- 1. Cover / Layar Pembuka -->
    <div id="cover" class="fixed inset-0 z-50">

        <!-- Background Video (DIHAPUS) -->
        <!-- 
        <video 
            autoplay 
            loop 
            muted 
            playsinline 
            class="absolute inset-0 z-0 w-full h-full object-cover"
            poster="https://www.southernliving.com/thmb/Z7NN4dQCkAYuJFdIDpJ_5h3x1LE=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/GettyImages-1432059240-799533b303604271a3909bf975efd31b.jpg"
        >
            <source src="https://taeodevmwvalajqjbpaq.supabase.co/storage/v1/object/public/video/Wedding%20HD%20Stock%20Video%20_%20Free%20stock%20footage%20_%20Free%20HD%20Videos%20-%20No%20Copyright%20_%20Channel%20Video%20Editor.mp4" type="video/mp4">
            Browser Anda tidak mendukung background video.
        </video>
        -->
        <div class="absolute inset-0 z-10 bg-black opacity-0"></div>

        <!-- Overlay -->
        <div class="cover-blur-overlay relative z-20 min-h-screen">
            
            <!-- PERUBAHAN: Kotak cover disesuaikan dengan tema baru -->
            <div class="relative z-10 theme-text-primary p-6 md:p-8 max-w-lg mx-auto text-center bg-[var(--bg-primary)]/80 rounded-2xl backdrop-blur-md border-2 border-[var(--text-accent)]"
                 data-aos="fade-up" data-aos-delay="50">
                
                <p class="font-serif text-base sm:text-lg md:text-xl" data-aos="fade-up" data-aos-delay="100">Undangan Pernikahan</p>
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h1 class="font-serif text-5xl sm:text-7xl md:text-8xl my-4 theme-text-accent" data-aos="fade-up" data-aos-delay="150">ZR</h1>
                <p class="font-serif text-base sm:text-lg md:text-xl" data-aos="fade-up" data-aos-delay="200">21 Desember 2025</p>
                
                <div class="mt-12 font-serif" data-aos="fade-up" data-aos-delay="250">
                    <p class="text-base sm:text-lg">Kepada Yth.</p>
                    <p id="guest-name" class="text-xl sm:text-2xl font-bold my-2">Tamu Undangan</p>
                    <p class="text-sm">(Mohon maaf tidak dapat menyebutkan satu per satu)</p>
                </div>

                <!-- PERUBAHAN: Tombol (sekarang Hijau) -->
                <button id="open-invitation" class="mt-8 theme-bg-accent text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105 flex items-center justify-center mx-auto"
                        data-aos="fade-up" data-aos-delay="300">
                    <i data-lucide="mail-open" class="w-5 h-5 mr-2"></i>
                    Buka Undangan
                </button>
            </div>
        </div>
    </div>

    <!-- 2. Konten Utama -->
    <main id="main-content" class="opacity-0 pb-20 md:pb-0 relative z-10">
        
        <!-- Toolbar Bawah (Hanya HP) -->
        <!-- PERUBAHAN: Bayangan lebih terlihat di atas tekstur kertas -->
        <nav id="bottom-toolbar" class="fixed bottom-0 left-0 right-0 z-40 h-16 theme-bg-primary shadow-[0_-4px_12px_rgba(0,0,0,0.1)] flex justify-around items-center md:hidden">
            <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
            <a href="#home" class="flex flex-col items-center justify-center text-xs theme-text-secondary hover:theme-text-accent p-2">
                <i data-lucide="home" class="w-5 h-5"></i>
                <span>Home</span>
            </a>
            <a href="#mempelai" class="flex flex-col items-center justify-center text-xs theme-text-secondary hover:theme-text-accent p-2">
                <i data-lucide="users" class="w-5 h-5"></i>
                <span>Mempelai</span>
            </a>
            <a href="#lokasi" class="flex flex-col items-center justify-center text-xs theme-text-secondary hover:theme-text-accent p-2">
                <i data-lucide="map-pin" class="w-5 h-5"></i>
                <span>Lokasi</span>
            </a>
            <a href="#ucapan" class="flex flex-col items-center justify-center text-xs theme-text-secondary hover:theme-text-accent p-2">
                <i data-lucide="message-circle" class="w-5 h-5"></i>
                <span>Ucapan</span>
            </a>
        </nav>
        
        <!-- Tombol Musik -->
        <!-- PERUBAHAN: Tombol (sekarang Hijau) -->
        <button id="music-toggle" class="fixed bottom-20 right-6 z-40 w-12 h-12 rounded-full theme-bg-accent text-white flex items-center justify-center shadow-lg md:bottom-6">
            <span id="music-icon-wrapper">
                <i data-lucide="music-2" class="w-6 h-6"></i>
            </span>
        </button>
        <audio id="bg-music" loop>
            <source src="https://taeodevmwvalajqjbpaq.supabase.co/storage/v1/object/public/music/KAHITNA_-_Menikahimu_(mp3.pm).mp3" type="audio/mpeg">
            Browser Anda tidak mendukung elemen audio.
        </audio>

        <!-- 3. Header / Hero Section -->
        <header id="home" class="h-screen min-h-[600px] flex flex-col items-center justify-center text-center p-6 md:p-8 relative overflow-hidden">
            
            <div class="absolute inset-0 bg-fixed hero-ornament-pattern z-0">
            </div>
            <!-- PERUBAHAN: Overlay disesuaikan -->
            <div class="absolute inset-0 bg-[var(--bg-primary)]/30 z-10"></div> 
            <div class="relative z-10 theme-text-primary pt-20 p-8">
                
                <p class="text-xl sm:text-2xl md:text-3xl font-serif" data-aos="fade-up">The Wedding Of</p>
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h1 class="text-5xl sm:text-7xl md:text-8xl font-serif my-4 theme-text-accent" data-aos="fade-up" data-aos-delay="200">Zeldi & Ria</h1>
                
                <p class="text-xl sm:text-2xl md:text-3xl font-serif" data-aos="fade-up" data-aos-delay="400">21 . 12 . 2025</p>
            </div>
        </header>

        <!-- 4. Mempelai -->
        <section id="mempelai" class="py-16 sm:py-24 px-6 max-w-5xl mx-auto relative">

            <div class="text-center relative z-10" data-aos="fade-up">
                <p class="text-lg theme-text-secondary">Assalamu'alaikum Warahmatullahi Wabarakatuh</p>
                
                <div class="my-8" data-aos="fade-up" data-aos-delay="100">
                    <p class="font-arabic text-xl sm:text-2xl md:text-3xl theme-text-primary leading-relaxed" dir="rtl">
                        وَمِنْ آيَاتِهِ أَنْ خَلَقَ لَكُمْ مِنْ أَنْفُsِكُمْ أَزْوَAJًا لِتَسْكُنُوا إِلَيْهَا وَجَعَلَ بَيْنَكُمْ مَوَدَّةً وَرَحْمَةً ۚ إِنَّ فِي ذَٰلِكَ لَآيَاتٍ لِقَوْMٍ يَتَفَكَّرُونَ
                    </p>
                    <p class="mt-4 text-sm italic max-w-2xl mx-auto">
                        "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang. Sungguh, pada yang demikian itu benar-benar terdapat tanda-tanda (kebesaran Allah) bagi kaum yang berpikir."
                    </p>
                    <p class="mt-2 text-base font-semibold">(QS. Ar-Rum: 21)</p>
                </div>

                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h2 class="text-3xl sm:text-4xl font-serif my-4 theme-text-accent">Kami Menikah</h2>
                <div class="floral-divider"></div>
                <p class="max-w-2xl mx-auto text-base">
                    Maha suci Allah yang telah menciptakan makhluk-Nya berpasang-pasangan.
                    Dengan memohon rahmat dan ridho Allah SWT, kami bermaksud mengundang Bapak/Ibu/Saudara/i
                    untuk hadir dalam acara pernikahan kami:
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 mt-20 text-center relative z-10">
                
                <!-- PERUBAHAN: .accent-border (sekarang Card) -->
                <div data-aos="fade-right" data-aos-delay="200" class="accent-border">
                    
                    <!-- PERUBAHAN: Border Emas, Background Beige -->
                    <div class="w-32 h-32 sm:w-48 sm:h-48 rounded-full mx-auto shadow-lg border-4 border-[var(--text-accent)] flex items-center justify-center theme-bg-secondary">
                        <span class="font-script text-6xl sm:text-7xl theme-text-primary">Zeldi</span>
                    </div>
                    
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <h3 class="text-2xl sm:text-3xl font-serif mt-6 mb-2 theme-text-accent italic">Zeldi Nugroho, S.E.</h3>
                    <p class="text-lg font-bold theme-text-accent italic">(zeldi)</p>
                    <p class="mt-4 text-base">Putra dari:</p>
                    <p class="font-semibold">Bpk. Alm. H. Drs. Muchanan Aguston</p>
                    <p class="font-semibold">& Ibu Alm. Hj. Umamudah</p>
                </div>
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <div class="flex items-center justify-center text-7xl font-serif theme-text-accent md:hidden" data-aos="fade-up">&</div>
                
                <!-- PERUBAHAN: .accent-border (sekarang Card) -->
                <div data-aos="fade-left" data-aos-delay="400" class="accent-border">
                    
                    <!-- PERUBAHAN: Border Emas, Background Beige -->
                    <div class="w-32 h-32 sm:w-48 sm:h-48 rounded-full mx-auto shadow-lg border-4 border-[var(--text-accent)] flex items-center justify-center theme-bg-secondary">
                        <span class="font-script text-6xl sm:text-7xl theme-text-primary">Ria</span>
                    </div>
                    
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <h3 class="text-2xl sm:text-3xl font-serif mt-6 mb-2 theme-text-accent italic">Fitria Adhi Yulianti</h3>
                    <p class="text-lg font-bold theme-text-accent italic">(ria adara)</p>
                    <p class="mt-4 text-base">Putri dari:</p>
                    <p class="font-semibold">Bpk. Purnomo Edy Susanto</p>
                    <p class="font-semibold">& Ibu R. rr. Retno Adiastuti Kencono Wulan.</p>
                </div>
            </div>
        </section>

        <!-- 5. Detail Acara & Countdown (DIHAPUS SESUAI PERMINTAAN) -->
        <!-- 6. Detail Akad (DIHAPUS SESUAI PERMINTAANN) -->


        <!-- 7. Lokasi -->
        <section id="lokasi" class="py-16 sm:py-24 px-6 text-center relative">
            
            <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
            <h2 class="text-3xl sm:text-4xl font-serif mb-12 theme-text-accent" data-aos="fade-up">Lokasi Pernikahan</h2>
            <div class="floral-divider"></div>
            
            <!-- PERUBAHAN: .accent-border (sekarang Card) -->
            <div class="max-w-4xl mx-auto w-full rounded-lg shadow-xl accent-border" data-aos="fade-up" data-aos-delay="200">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.341499591419!2d106.8888065759111!3d-6.348821462106053!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69ecf7481f3377%3A0xb3f5aa4a480b6e31!2sMasjid%20Jami%2BAl-Muttaqin!5e0!3m2!1sen!2sid!4v1730305555000!5m2!1sen!2sid" 
                    width="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade"
                    class="w-full aspect-video rounded-lg">
                </iframe>
            </div>

            <!-- PERUBAHAN: Tombol (sekarang Hijau) -->
            <a href="https://share.google/ltrZZ2tCK3ebMGJHv" target="_blank" rel="noopener noreferrer" 
               class="inline-flex items-center justify-center mt-8 theme-bg-accent text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105"
               data-aos="fade-up" data-aos-delay="300">
                <i data-lucide="map-pin" class="w-5 h-5 mr-2"></i>
                Buka di Google Maps
            </a>
        </section>

        <!-- 8. Dress Code -->
        <!-- PERUBAHAN: theme-bg-secondary (sekarang Beige) -->
        <section class="py-16 px-6 theme-bg-secondary relative">
            <div class="max-w-2xl mx-auto text-center relative z-10" data-aos="fade-up">
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h3 class="text-2xl sm:text-3xl font-serif mb-4 theme-text-accent">Catatan untuk Tamu</h3>
                <div class="floral-divider"></div>
                <!-- PERUBAHAN: .accent-border (sekarang Card) -->
                <!-- PERUBAHAN: bg-white/70 menjadi bg-white solid -->
                <div class="bg-white p-8 rounded-lg shadow-xl accent-border">
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <i data-lucide="shirt" class="w-16 h-16 mx-auto theme-text-accent"></i>
                    <p class="text-xl sm:text-2xl font-serif mt-4">Dress Code:</p>
                    
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <p class="text-xl sm:text-2xl font-bold theme-text-accent mt-2">Putih</p>
                </div>
            </div>
        </section>

        <!-- 9. Buku Tamu (Ucapan) -->
        <section id="ucapan" class="py-16 sm:py-24 px-6">
            <div class="max-w-3xl mx-auto">
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h2 class="text-3xl sm:text-4xl font-serif text-center mb-12 theme-text-accent" data-aos="fade-up">Buku Tamu</h2>
                <div class="floral-divider"></div>
                
                <!-- PERUBAHAN: .accent-border (sekarang Card) -->
                <form id="guestbook-form" class="bg-white/80 p-4 sm:p-8 rounded-lg shadow-lg accent-border" data-aos="fade-up" data-aos-delay="200">
                    
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <h3 class="text-xl sm:text-2xl font-serif mb-6 theme-text-accent">Kirim Ucapan & Doa</h3>
                    <div class="mb-4">
                        <label for="guestbook-name" class="block text-sm font-bold mb-2 theme-text-primary">Nama Anda</label>
                        <!-- PERUBAHAN: focus ring Emas -->
                        <input type="text" id="guestbook-name" name="name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--text-accent)] theme-text-primary" required>
                    </div>
                    <div class="mb-4">
                        <label for="guestbook-message" class="block text-sm font-bold mb-2 theme-text-primary">Ucapan Anda</label>
                        <textarea id="guestbook-message" name="message" rows="4" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--text-accent)] theme-text-primary" required></textarea>
                    </div>
                    <!-- PERUBAHAN: Tombol (sekarang Hijau) -->
                    <button type="submit" id="guestbook-submit" class="w-full theme-bg-accent text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105">
                        Kirim Ucapan
                    </button>
                    
                    <div id="guestbook-success" class="hidden mt-4 text-center text-green-700 font-semibold">
                        Terima kasih atas ucapannya!
                    </div>
                </form>

                <div class="mt-12" data-aos="fade-up" data-aos-delay="300">
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <h3 class="text-xl sm:text-2xl font-serif mb-6 text-center theme-text-accent">Ucapan Terkini</h3>
                    <div class="floral-divider"></div>
                    <!-- PERUBAHAN: .accent-border (Card) & style di dalamnya -->
                    <div id="guestbook-messages" class="space-y-6 max-h-96 overflow-y-auto bg-white p-4 sm:p-6 rounded-lg accent-border">
                        <p id="guestbook-loading" class="text-center text-gray-500">Memuat ucapan...</p>
                        <!-- Ucapan akan dimuat di sini oleh JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- 10. RSVP -->
        <!-- PERUBAHAN: theme-bg-secondary (sekarang Beige) -->
        <section id="rsvp" class="py-16 sm:py-24 px-6 theme-bg-secondary relative">
            <div class="max-w-3xl mx-auto relative z-10">
                
                <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                <h2 class="text-3xl sm:text-4xl font-serif text-center mb-12 theme-text-accent" data-aos="fade-up">Konfirmasi Kehadiran</h2>
                <div class="floral-divider"></div>
                
                <p class="text-center max-w-lg mx-auto mb-12" data-aos="fade-up" data-aos-delay="100">
                    Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu. Mohon konfirmasi kehadiran Anda.
                </p>

                <!-- PERUBAHAN: .accent-border (Card) -->
                <form id="rsvp-form" class="bg-white/80 p-4 sm:p-8 rounded-lg shadow-lg accent-border" data-aos="fade-up" data-aos-delay="200">
                    <div class="mb-4">
                        <label for="rsvp-name" class="block text-sm font-bold mb-2 theme-text-primary">Nama Anda</label>
                        <input type="text" id="rsvp-name" name="name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--text-accent)] theme-text-primary" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-bold mb-2 theme-text-primary">Konfirmasi Kehadiran</label>
                        <div class="flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:justify-around mt-2">
                            <label class="flex items-center space-x-2">
                                <input type="radio" name="status" value="Hadir" class="focus:ring-[var(--text-accent)]" required>
                                <span>Hadir</span>
                            </label>
                            <label class="flex items-center space-x-2">
                                <input type="radio" name="status" value="Tidak Hadir" class="focus:ring-[var(--text-accent)]">
                                <span>Tidak Hadir</span>
                            </label>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="rsvp-guests" class="block text-sm font-bold mb-2 theme-text-primary">Jumlah Tamu (termasuk Anda)</label>
                        <input type="number" id="rsvp-guests" name="guests" min="1" value="1" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--text-accent)] theme-text-primary">
                    </div>
                    <!-- PERUBAHAN: Tombol (sekarang Hijau) -->
                    <button type="submit" id="rsvp-submit" class="w-full theme-bg-accent text-white px-6 py-3 rounded-full font-bold shadow-lg transition-transform duration-300 hover:scale-105">
                        Kirim Konfirmasi
                    </button>
                    <div id="rsvp-success" class="hidden mt-4 text-center text-green-700 font-semibold">
                        Terima kasih atas konfirmasi Anda!
                    </div>
                </form>
            </div>
        </section>

        <!-- 11. Footer / Penutup -->
        <!-- PERUBAHAN: Ditambahkan ID untuk target auto-scroll -->
        <footer id="footer-section" class="py-16 sm:py-24 px-6 text-center">
            <div class="max-w-3xl mx-auto">
                <p class="text-lg" data-aos="fade-up">
                    Merupakan suatu kehormatan dan kebahagiaan bagi kami,
                    apabila Bapak/Ibu/Saudara/i berkenan hadir dan memberikan doa restu.
                </p>
                <p class="text-lg mt-4" data-aos="fade-up" data-aos-delay="100">
                    Atas kehadiran dan doa restu, kami mengucapkan terima kasih.
                </p>
                <p class="text-lg mt-8" data-aos="fade-up" data-aos-delay="200">Wassalamu'alaikum Warahmatullahi Wabarakatuh</p>

                <div class="floral-divider"></div>

                <div data-aos="fade-up" data-aos-delay="300">
                    <!-- PERUBAHAN: theme-text-accent (sekarang Emas) -->
                    <h3 class="text-4xl sm:text-5xl font-script theme-text-accent">Zeldi & Ria</h3>
                    <p class="text-lg font-serif mt-2">21 . 12 . 2025</p>
                </div>
            </div>
        </footer>


    </main> <!-- Penutup #main-content -->

    <!-- Impor AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        // --- KONFIGURASI SUPABASE (WAJIB DIISI) ---
        const SUPABASE_URL = 'https://taeodevmwvalajqjbpaq.supabase.co'; 
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY'; 

        if (SUPABASE_ANON_KEY === 'YOUR_SUPABASE_ANON_KEY') {
            console.warn('Peringatan: Harap ganti SUPABASE_ANON_KEY dengan kunci anon Supabase Anda yang sebenarnya.');
            const guestbookSubmit = document.getElementById('guestbook-submit');
            const rsvpSubmit = document.getElementById('rsvp-submit');
            if(guestbookSubmit) {
                guestbookSubmit.disabled = true;
                guestbookSubmit.innerText = 'Database Belum Dikonfigurasi';
            }
            if(rsvpSubmit) {
                rsvpSubmit.disabled = true;
                rsvpSubmit.innerText = 'Database Belum Dikonfigurasi';
            }
        }
        const { createClient } = supabase;
        const db = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        // --- AKHIR KONFIGURASI SUPABASE ---

        // --- Variabel Auto Scroll ---
        let isAutoScrolling = false;
        let autoScrollSpeed = 0.5; 
        let scrollAnimationId;
        let footerElement; // Untuk menyimpan elemen footer
        // --- AKHIR ---

        // --- FUNGSI AUTO SCROLL ---
        function smoothAutoScroll() {
            if (!isAutoScrolling) return; 

            let stopScrolling = false;

            // Logika Pengecekan Henti (Sudah diperbarui)
            if (footerElement) {
                const footerStopPosition = footerElement.offsetTop; 
                const currentViewBottom = window.scrollY + window.innerHeight;
                
                // Berhenti jika bagian bawah viewport sudah mencapai bagian atas footer
                // Diberi offset 50px agar berhenti tepat saat footer mulai masuk
                if (currentViewBottom >= (footerStopPosition - 50)) { 
                    stopScrolling = true;
                }
            } else {
                // Fallback: Cek jika sudah di dasar halaman
                if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 2) {
                    stopScrolling = true;
                }
            }

            if (stopScrolling) {
                stopAutoScroll(); // Berhenti
            } else {
                window.scrollBy(0, autoScrollSpeed); // Lanjutkan scroll
                scrollAnimationId = requestAnimationFrame(smoothAutoScroll); // Lanjutkan loop
            }
        }

        function stopAutoScroll() {
            isAutoScrolling = false;
            if (scrollAnimationId) {
                cancelAnimationFrame(scrollAnimationId);
            }
            window.removeEventListener('wheel', stopAutoScroll);
            window.removeEventListener('touchmove', stopAutoScroll);
        }

        function startAutoScroll() {
            isAutoScrolling = true;
            window.addEventListener('wheel', stopAutoScroll, { once: true, passive: true });
            window.addEventListener('touchmove', stopAutoScroll, { once: true, passive: true });
            scrollAnimationId = requestAnimationFrame(smoothAutoScroll);
        }
        // --- AKHIR FUNGSI AUTO SCROLL ---

        // Fungsi untuk mengambil nama tamu dari URL
        function getGuestName() {
            const urlParams = new URLSearchParams(window.location.search);
            const guest = urlParams.get('to'); 
            if (guest) {
                const guestNameEl = document.getElementById('guest-name');
                const formattedGuestName = guest.replace(/\+/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                if(guestNameEl) guestNameEl.innerText = formattedGuestName;
                const rsvpNameEl = document.getElementById('rsvp-name');
                const guestbookNameEl = document.getElementById('guestbook-name');
                if (rsvpNameEl) rsvpNameEl.value = formattedGuestName;
                if (guestbookNameEl) guestbookNameEl.value = formattedGuestName;
            }
        }
        
        <!-- FUNGSI loadGuestbookMessages YANG LAMA (DUPLIKAT) DIHAPUS DARI SINI -->
        <!-- BARIS 888-921 TELAH DIHAPUS -->

        // Fungsi untuk memuat pesan buku tamu
        async function loadGuestbookMessages() {
            const messagesContainer = document.getElementById('guestbook-messages');
            const loadingEl = document.getElementById('guestbook-loading');
            if (!messagesContainer || !loadingEl) return;

            loadingEl.style.display = 'block';
            messagesContainer.innerHTML = ''; 
            messagesContainer.appendChild(loadingEl);

            try {
                const { data, error } = await db
                    .from('guestbook')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .limit(20); 

                if (error) throw error;

                loadingEl.style.display = 'none';

                if (data.length === 0) {
                    messagesContainer.innerHTML = '<p class="text-center text-gray-500">Belum ada ucapan.</p>';
                    return;
                }

                data.forEach(message => {
                    const messageEl = document.createElement('div');
                    // PERUBAHAN: Style bubble chat disesuaikan
                    messageEl.className = 'theme-bg-secondary p-4 rounded-lg shadow-sm theme-text-primary border-l-4 border-[var(--text-accent)]';
                    const safeName = message.name.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                    const safeMessage = message.message.replace(/</g, "&lt;").replace(/>/g, "&gt;");

                    messageEl.innerHTML = `
                        <p class="font-bold text-lg theme-text-accent">${safeName}</p>
                        <p class="mt-2 text-base">${safeMessage}</p>
                        <p class="text-xs text-gray-500 mt-2">${new Date(message.created_at).toLocaleString('id-ID')}</p>
                    `;
                    messagesContainer.appendChild(messageEl);
                });

            } catch (error) {
                console.error('Error memuat pesan:', error.message);
                loadingEl.style.display = 'none';
                messagesContainer.innerHTML = '<p class="text-center text-red-500">Gagal memuat ucapan.</p>';
            }
        }

        // Fungsi untuk setup semua event listener
        function setupEventListeners() {
            const cover = document.getElementById('cover');
            const mainContent = document.getElementById('main-content');
            const openButton = document.getElementById('open-invitation');
            const music = document.getElementById('bg-music');
            const musicToggle = document.getElementById('music-toggle');
            
            // 1. Tombol Buka Undangan
            if (openButton) {
                openButton.addEventListener('click', () => {
                    if (cover) cover.classList.add('hidden');
                    if (mainContent) {
                        mainContent.style.opacity = '1';
                        mainContent.style.transition = 'opacity 1s ease-in-out';
                    }
                    
                    AOS.init({
                        duration: 800,
                        once: true,
                        offset: 50,
                    });

                    if (music) music.play().catch(e => console.warn("Autoplay musik diblokir oleh browser:", e));
                    if (musicToggle) musicToggle.classList.add('playing');

                    startAutoScroll();
                });
            }

            // 2. Tombol Musik
            if (musicToggle && music) {
                musicToggle.addEventListener('click', () => {
                    if (music.paused) {
                        music.play();
                        musicToggle.classList.add('playing');
                    } else {
                        music.pause();
                        musicToggle.classList.remove('playing');
                    }
                });
            }

            // 3. Smooth Scroll (Navigasi bottom bar)
            document.querySelectorAll('#bottom-toolbar a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // 4. Form Guestbook
            const guestbookForm = document.getElementById('guestbook-form');
            if (guestbookForm) {
                guestbookForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (SUPABASE_ANON_KEY === 'YOUR_SUPABASE_ANON_KEY') return; 

                    const submitButton = document.getElementById('guestbook-submit');
                    const successMessage = document.getElementById('guestbook-success');
                    const formData = new FormData(guestbookForm);
                    const name = formData.get('name');
                    const message = formData.get('message');

                    submitButton.disabled = true;
                    submitButton.innerText = 'Mengirim...';

                    try {
                        const { error } = await db
                            .from('guestbook') 
                            .insert([{ name: name, message: message }]);
                        if (error) throw error;
                        guestbookForm.reset(); 
                        getGuestName(); 
                        if(successMessage) successMessage.classList.remove('hidden');
                        setTimeout(() => successMessage.classList.add('hidden'), 3000); 
                        loadGuestbookMessages(); 
                    } catch (error) {
                        console.error('Error kirim guestbook:', error.message);
                        alert('Maaf, terjadi kesalahan saat mengirim ucapan.');
                    } finally {
                        submitButton.disabled = false;
                        submitButton.innerText = 'Kirim Ucapan';
                    }
                });
            }

            // 5. Form RSVP
            const rsvpForm = document.getElementById('rsvp-form');
            if (rsvpForm) {
                rsvpForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    if (SUPABASE_ANON_KEY === 'YOUR_SUPABASE_ANON_KEY') return; 

                    const submitButton = document.getElementById('rsvp-submit');
                    const successMessage = document.getElementById('rsvp-success');
                    const formData = new FormData(rsvpForm);
                    const name = formData.get('name');
                    const status = formData.get('status');
                    const guests = formData.get('guests');

                    submitButton.disabled = true;
                    submitButton.innerText = 'Mengirim...';

                    try {
                        const { error } = await db
                            .from('rsvp') 
                            .insert([{ name: name, status: status, guests: guests }]);
                        if (error) throw error;
                        rsvpForm.reset();
                        getGuestName();
                        if(successMessage) successMessage.classList.remove('hidden');
                        setTimeout(() => successMessage.classList.add('hidden'), 3000);
                    } catch (error) {
                        console.error('Error kirim RSVP:', error.message);
                        alert('Maaf, terjadi kesalahan saat mengirim konfirmasi.');
                    } finally {
                        submitButton.disabled = false;
                        submitButton.innerText = 'Kirim Konfirmasi';
                    }
                });
            }
        }

        // --- EKSEKUSI SAAT DOM SIAP ---
        document.addEventListener('DOMContentLoaded', () => {
            try {
                lucide.createIcons();
            } catch (e) {
                console.error("Gagal memuat Lucide icons:", e);
            }
            
            setupEventListeners();
            
            if (SUPABASE_ANON_KEY !== 'YOUR_SUPABASE_ANON_KEY') {
                loadGuestbookMessages();
            } else {
                const loadingEl = document.getElementById('guestbook-loading');
                if(loadingEl) {
                    loadingEl.innerText = 'Database belum dikonfigurasi.';
                }
            }
            
            getGuestName();
            
            // Ambil elemen footer (untuk auto-scroll)
            footerElement = document.getElementById('footer-section');

            AOS.init({
                duration: 800,
                once: true,
            });
        });
    </script>

</body>
</html>
